
-- ÐÞ¸Ä[ñÒÉÙÎ¢ 2008.5.29 Ìí¼Ó,Ä§±øÌì½«,¼«Æ·×°±¸·Å³ö¡£]

-- 001067 Ì××°Ð±i l¤y bµ trang b¸ ngñ tÑ c¤p NPC

-- ÁºÊ¦³É

--½Å±¾ºÅ
x001067_g_ScriptId = 001067

--ËùÓµÓÐµÄÊÂ¼þIDÁÐ±í
x001067_g_eventList={889061}

--½â¾öÁ÷Ê§ÂÊÐ±i l¤y bµ trang b¸ ngñ tÑ c¤p ÃÅÅÉÌ××°ÊÂ¼þ½Å±¾
x001067_g_MenPaiTaoScriptId = 500617

x001067_g_EquipList={	
--       Y Phøc£­£­£­£­£­£­£­£­Yêu Ðái£­£­£­£­£­£­£­£­îø¼×£­£­£­£­£­
{n=1100,id=10413007},{n=1200,id=10421007},{n=1300,id=10412007},{n=1400,id=10411007},
{n=1100,id=10413001},{n=1200,id=10421001},{n=1300,id=10412001},{n=1400,id=10411001},

-- 30¼¶±ðµÄ
{n=2100,id=10413008},{n=2200,id=10421008},{n=2300,id=10412008},{n=2400,id=10411008},
{n=2100,id=10413002},{n=2200,id=10421002},{n=2300,id=10412002},{n=2400,id=10411002},

-- 40¼¶±ðµÄ
{n=3100,id=10413009},{n=3200,id=10421009},{n=3300,id=10412009},{n=3400,id=10411009},{n=3500,id=10414024},
{n=3100,id=10413003},{n=3200,id=10421003},{n=3300,id=10412003},{n=3400,id=10411003},{n=3500,id=10414020},

-- 50¼¶±ðµÄ
{n=4100,id=10413010},{n=4200,id=10421010},{n=4300,id=10412010},{n=4400,id=10411010},{n=4500,id=10414025},
{n=4100,id=10413004},{n=4200,id=10421004},{n=4300,id=10412004},{n=4400,id=10411004},{n=4500,id=10414021},

-- 60¼¶±ðµÄ
{n=5100,id=10413011},{n=5200,id=10421011},{n=5300,id=10412011},{n=5400,id=10411011},{n=5500,id=10414026},{n=5600,id=10415018},
{n=5100,id=10413005},{n=5200,id=10421005},{n=5300,id=10412005},{n=5400,id=10411005},{n=5500,id=10414022},{n=5600,id=10415016},

-- 70¼¶±ðµÄ
{n=6100,id=10413012},{n=6200,id=10421012},{n=6300,id=10412012},{n=6400,id=10411012},{n=6500,id=10414027},{n=6600,id=10415019},
{n=6100,id=10413006},{n=6200,id=10421006},{n=6300,id=10412006},{n=6400,id=10411006},{n=6500,id=10414023},{n=6600,id=10415017},
-- 80¼¶±ðµÄ
{n=7100,id=10413017},{n=7200,id=10421014},{n=7300,id=10412017},{n=7400,id=10411014},{n=7500,id=10414028},{n=7600,id=10415020},
{n=7100,id=10413018},{n=7200,id=10421015},{n=7300,id=10412018},{n=7400,id=10411015},{n=7500,id=10414029},{n=7600,id=10415021},
-- 90¼¶±ðµÄ
{n=8100,id=10413019},{n=8200,id=10421016},{n=8300,id=10412019},{n=8400,id=10411016},{n=8500,id=10414030},{n=8600,id=10415022},
{n=8100,id=10413020},{n=8200,id=10421017},{n=8300,id=10412020},{n=8400,id=10411017},{n=8500,id=10414031},{n=8600,id=10415023},

-- ñÒÉÙÎ¢£¬2008.5.29¡£¼«Æ·×°±¸·Å³ö¡£Á½¸ö×°±¸£º10422016--ÖØÂ¥½ä	10423024--ÖØÂ¥Óñ
{n=9100,id=10422016},
{n=9100,id=10423026},
{n=9100,id=10553237},
}

x001067_g_StoneList={
-- 1¼¶Ê¯Í·
{n=1,id=20309010,num=6,str="VÕn Linh ThÕch c¤p 1"},
-- 2¼¶Ê¯Í·
{n=2,id=20309011,num=8,str="VÕn Linh ThÕch c¤p 2"},
-- 3¼¶Ê¯Í·
{n=3,id=20309012,num=10,str="VÕn Linh ThÕch c¤p 3"},
-- 4¼¶Ê¯Í·
{n=4,id=20309013,num=12,str="VÕn Linh ThÕch c¤p 4"},
-- 5¼¶Ê¯Í·
{n=5,id=20309014,num=14,str="VÕn Linh ThÕch c¤p 5"},
-- 6¼¶Ê¯Í·
{n=6,id=20309015,num=16,str="VÕn Linh ThÕch c¤p 6"},
--80,90¼¶ ×°±¸ ÐèÒªµÄÊ¯Í·
{n=7,id=20309016,num=32,str="VÕn Linh ThÕch c¤p 7"},
{n=8,id=20309017,num=48,str="VÕn Linh ThÕch c¤p 8"},	--ÓÉ64¸ÄÎª48	--modify by xindefeng

-- ñÒÉÙÎ¢£¬2008.5.29¡£¼«Æ·×°±¸·Å³ö¡£Á½¸öÐ±i l¤y bµ trang b¸ ngñ tÑ c¤p ÐèÒªµÄÎïÆ·£º20310101--ÖØÂ¥Ö®Àá	20310102--ÖØÂ¥Ö®Ã¢
{n=9,id=20310101,num=100,str="Trùng Lâu Chi L®"},
{n=10,id=20310102,num=100,str="Trùng Lâu Chi Mang"},
{n=11,id=20310100,num=100,str="Trùng Lâu Chi Linh"},

}

x001067_g_Stone2ID = 20309018 --ÐÂÔö¶þ¼¶ÍòÁéÊ¯(°ó¶¨) 
--**********************************
--ÊÂ¼þÁÐ±í
--**********************************
function x001067_UpdateEventList( sceneId, selfId,targetId )
	BeginEvent(sceneId)
		AddText(sceneId,"  #{JPZB_0610_01}")
		
		AddNumText( sceneId, x001067_g_MenPaiTaoScriptId, "Ð±i l¤y bµ trang b¸ Môn Phái", 6, 846 )
		AddNumText( sceneId, x001067_g_ScriptId, "Ð±i l¤y bµ trang b¸ ngñ tÑ c¤p 18", 6, 1000 )
		AddNumText( sceneId, x001067_g_ScriptId, "Ð±i l¤y bµ trang b¸ ngñ tÑ c¤p 30", 6, 2000 )
		AddNumText( sceneId, x001067_g_ScriptId, "Ð±i l¤y bµ trang b¸ ngñ tÑ c¤p 40", 6, 3000 )
		AddNumText( sceneId, x001067_g_ScriptId, "Ð±i l¤y bµ trang b¸ ngñ tÑ c¤p 50", 6, 4000 )
		AddNumText( sceneId, x001067_g_ScriptId, "Ð±i l¤y bµ trang b¸ ngñ tÑ c¤p 60", 6, 5000 )
		AddNumText( sceneId, x001067_g_ScriptId, "Ð±i l¤y bµ trang b¸ ngñ tÑ c¤p 70", 6, 6000 )
		AddNumText( sceneId, x001067_g_ScriptId, "Ð±i l¤y bµ trang b¸ ngñ tÑ c¤p 80", 6, 7000 )
		AddNumText( sceneId, x001067_g_ScriptId, "Ð±i l¤y bµ trang b¸ ngñ tÑ c¤p 90", 6, 8000 )

		AddNumText( sceneId, x001067_g_ScriptId, "R¶i ði...", 0, 0 )

	EndEvent(sceneId)
	DispatchEventList(sceneId,selfId,targetId)
end

--**********************************
--ÊÂ¼þ½»»¥Èë¿Ú
--**********************************
function x001067_OnDefaultEvent( sceneId, selfId,targetId )
	x001067_UpdateEventList( sceneId, selfId, targetId )
end

--**********************************
--ÊÂ¼þÁÐ±íÑ¡ÖÐÒ»Ïî
--**********************************
function x001067_OnEventRequest( sceneId, selfId, targetId, eventId )
	local nNumText = GetNumText()
	
	for i, findId in x001067_g_eventList do
		if eventId == findId then			
			CallScriptFunction( eventId, "OnDefaultEvent",sceneId, selfId, targetId )
			return
		end
	end
	
	if eventId == x001067_g_MenPaiTaoScriptId then
		if nNumText == 846 then
			CallScriptFunction( eventId, "OnDefaultEvent",sceneId, selfId, targetId )
			return
		elseif nNumText == 2500 or nNumText == 2600 or nNumText == 2700 then
			CallScriptFunction( eventId, "OnEventRequest",sceneId, selfId, targetId )
			return
		end
	end
	
	if nNumText == 0  then
		-- ¹Ø±Õ´°¿Ú
		BeginUICommand(sceneId)
		EndUICommand(sceneId)
		DispatchUICommand(sceneId,selfId, 1000)
		return
	end
	
	if nNumText == 1000 or nNumText == 2000 or nNumText == 3000 or nNumText == 4000 or nNumText == 5000 or nNumText == 6000 or nNumText == 7000 or nNumText == 8000  then
		BeginEvent(sceneId)
			AddText(sceneId, "  #{JPZB_0610_02}")
			AddNumText(sceneId, x001067_g_ScriptId, "Ð±i l¤y Y Phøc", 0, nNumText+100)
			AddNumText(sceneId, x001067_g_ScriptId, "Ð±i l¤y Yêu Ðái", 0, nNumText+200)
			AddNumText(sceneId, x001067_g_ScriptId, "Ð±i l¤y Hµ Thü", 0, nNumText+300)
			AddNumText(sceneId, x001067_g_ScriptId, "Ð±i l¤y Hài TØ", 0, nNumText+400)
			if nNumText > 2000  then
				AddNumText(sceneId, x001067_g_ScriptId, "Ð±i l¤y bµ trang b¸ ngñ tÑ NgoÕi Công", 0, nNumText+500)
				if nNumText > 4000  then
					AddNumText(sceneId, x001067_g_ScriptId, "Ð±i l¤y bµ trang b¸ ngñ tÑ Nµi Công", 0, nNumText+600)
				end
			end
			AddNumText( sceneId, x001067_g_ScriptId, "R¶i ði...", 0, 0 )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end
	
	if nNumText > 1000 and nNumText < 9000  then
		BeginEvent(sceneId)
			AddText(sceneId, "  #{JPZB_0610_03}")
			
			local nLevel = 0
			if nNumText > 1000 then
				nLevel = 1
			end
			if nNumText > 2000 then
				nLevel = 2
			end
			if nNumText > 3000 then
				nLevel = 3
			end
			if nNumText > 4000 then
				nLevel = 4
			end
			if nNumText > 5000 then
				nLevel = 5
			end
			if nNumText > 6000 then
				nLevel = 6
			end
			if nNumText > 7000 then
				nLevel = 7
			end
			if nNumText > 8000 then
				nLevel = 8
			end
			
			local szStr = "  #{JPZB_0610_04}" .. x001067_g_StoneList[nLevel].str 
										.. "\" \"".. tostring(x001067_g_StoneList[nLevel].num) .. "#{JPZB_0610_05}"
			AddText(sceneId, szStr)
			
			for i, item in x001067_g_EquipList do
				if item.n == nNumText  then
					AddRadioItemBonus( sceneId, item.id, 4 )
				end
			end
    EndEvent(sceneId)
    --DispatchMissionDemandInfo(sceneId,selfId,targetId, x001067_g_ScriptId, x210200_g_MissionId)
    DispatchMissionContinueInfo(sceneId,selfId,targetId, x001067_g_ScriptId, 0)
		
	end
		
	-- ñÒÉÙÎ¢£¬2008.5.29¡£¼«Æ·×°±¸·Å³ö¡£Ìí¼ÓÁ½¸ö°´Å¥µÄ´¦ÀíÊÂ¼þ
	if nNumText == 9000 then
		BeginEvent(sceneId)	
				local szStr = "  #{JPZB_0610_06}"
				AddText(sceneId, szStr)
				for i, item in x001067_g_EquipList do
					if item.n == 9100  then
						AddRadioItemBonus( sceneId, item.id, 4 )
					end
				end
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		DispatchMissionContinueInfo(sceneId,selfId,targetId, x001067_g_ScriptId, 0)
	end
	-- Ä§±øÌì½µ½éÉÜ
	if nNumText == 10000 then
		BeginEvent(sceneId)	
			AddText( sceneId, "#{JPZB_20080523_01}" )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
	end

	
end

--**********************************
--½ÓÊÜ´ËNPCµÄÈÎÎñ
--**********************************
function x001067_OnMissionAccept( sceneId, selfId, targetId, missionScriptId )
	for i, findId in x001067_g_eventList do
		if missionScriptId == findId then
			ret = CallScriptFunction( missionScriptId, "CheckAccept", sceneId, selfId )
			if ret > 0 then
				CallScriptFunction( missionScriptId, "OnAccept", sceneId, selfId )
			end
			return
		end
	end
	for i, findId in g_eventListTest do
		if missionScriptId == findId then
			ret = CallScriptFunction( missionScriptId, "CheckAccept", sceneId, selfId )
			if ret > 0 then
				CallScriptFunction( missionScriptId, "OnAccept", sceneId, selfId )
			end
			return
		end
	end
end

--**********************************
--¾Ü¾ø´ËNPCµÄÈÎÎñ
--**********************************
function x001067_OnMissionRefuse( sceneId, selfId, targetId, missionScriptId )
	--¾Ü¾øÖ®ºó£¬Òª·µ»ØNPCµÄÊÂ¼þÁÐ±í
	for i, findId in x001067_g_eventList do
		if missionScriptId == findId then
			x001067_UpdateEventList( sceneId, selfId, targetId )
			return
		end
	end
	for i, findId in g_eventListTest do
		if missionScriptId == findId then
			x001067_UpdateEventList( sceneId, selfId, targetId )
			return
		end
	end
end

--**********************************
--¼ÌÐø£¨ÒÑ¾­½ÓÁËÈÎÎñ£©
--**********************************
function x001067_OnMissionContinue( sceneId, selfId, targetId, missionScriptId )
	for i, findId in x001067_g_eventList do
		if missionScriptId == findId then
			CallScriptFunction( missionScriptId, "OnContinue", sceneId, selfId, targetId )
			return
		end
	end
	for i, findId in g_eventListTest do
		if missionScriptId == findId then
			CallScriptFunction( missionScriptId, "OnContinue", sceneId, selfId, targetId )
			return
		end
	end
end

--**********************************
--Ìá½»ÒÑ×öÍêµÄÈÎÎñ
--**********************************
function x001067_OnMissionSubmit( sceneId, selfId, targetId, missionScriptId, selectRadioId )

	for i, findId in x001067_g_eventList do
		if missionScriptId == findId then
			CallScriptFunction( missionScriptId, "OnSubmit", sceneId, selfId, targetId, selectRadioId )
			return
		end
	end
	
	--´¦ÀíÌá½»ºóµÄÏÔÊ¾Çé¿ö
	--ÎªÁË°²È«£¬ÕâÀïÒª×ÐÏ¸£¬²»ÄÜ³ö´í
	local nItemIndex = -1
	
	if missionScriptId == x001067_g_MenPaiTaoScriptId then
		CallScriptFunction( missionScriptId, "OnMissionSubmit", sceneId, selfId, targetId, missionScriptId, selectRadioId )
		return 0
	end
	
	for i, item in x001067_g_EquipList do
		if item.id == selectRadioId  then
			nItemIndex = i
		end
	end
	
	if nItemIndex == -1  then
		return
	end
	
	-- ¿´Íê¼ÒÊÇ²»ÊÇ¹»²ÄÁÏÌá½»
	local nLevel = 0
	if x001067_g_EquipList[nItemIndex].n > 1000 then
		nLevel = 1
	end
	if x001067_g_EquipList[nItemIndex].n > 2000 then
		nLevel = 2
	end
	if x001067_g_EquipList[nItemIndex].n > 3000 then
		nLevel = 3
	end
	if x001067_g_EquipList[nItemIndex].n > 4000 then
		nLevel = 4
	end
	if x001067_g_EquipList[nItemIndex].n > 5000 then
		nLevel = 5
	end
	if x001067_g_EquipList[nItemIndex].n > 6000 then
		nLevel = 6
	end
	if x001067_g_EquipList[nItemIndex].n > 7000 then
		nLevel = 7
	end
	if x001067_g_EquipList[nItemIndex].n > 8000 then
		nLevel = 8
	end
	
	-- ñÒÉÙÎ¢£¬2008.5.29¡£¼«Æ·×°±¸·Å³ö¡£
	if x001067_g_EquipList[nItemIndex].n == 9100 then
		if selectRadioId == 10422016 then
			nLevel = 9
		else 
			if selectRadioId == 10423026 then
				nLevel = 10
			else 
				if selectRadioId == 10553237 then
					nLevel = 11
				end
			end
		end
	end
	
	local bStoneOk = 0
	if GetItemCount(sceneId, selfId, x001067_g_StoneList[nLevel].id) >= x001067_g_StoneList[nLevel].num  then
		bStoneOk = 1
	end
	--ÐÂÔö¶þ¼¶ÍòÁéÊ¯¼ì²â
  if nLevel == 2 then 
	  if GetItemCount(sceneId, selfId, x001067_g_StoneList[nLevel].id) + GetItemCount(sceneId, selfId, x001067_g_Stone2ID)>= x001067_g_StoneList[nLevel].num  then
			bStoneOk = 1
		end
  end
	
	if  bStoneOk == 0 then
		BeginEvent(sceneId)
			if nLevel == 9 then
				strText = "#{JPZB_0610_07}"
			elseif nLevel == 10 then 
					strText = "#{JPZB_0610_08}"
			else
				strText = "#{JPZB_0610_09}"
			end
			AddText(sceneId,strText);
		EndEvent(sceneId)
		DispatchMissionTips(sceneId,selfId)
		return
	end
	
	-- ¼ì²éÊÇ²»ÊÇÓÐ×ã¹»µÄÊ¯Í·¿ÉÒÔ¿Û³ý
	local StoneCount = LuaFnGetAvailableItemCount(sceneId, selfId, x001067_g_StoneList[nLevel].id)
	local Stone2Count = LuaFnGetAvailableItemCount(sceneId, selfId, x001067_g_Stone2ID)
	
	if (nLevel == 2 and StoneCount + Stone2Count < x001067_g_StoneList[nLevel].num) or 
	   (nLevel ~= 2 and StoneCount < x001067_g_StoneList[nLevel].num) then
	    
		BeginEvent(sceneId)
			-- ñÒÉÙÎ¢£¬2008.5.29¡£¼«Æ·×°±¸·Å³ö¡£
			if nLevel == 9 then
				strText = "#{JPZB_0610_07}"
			elseif nLevel == 10 then 
					strText = "#{JPZB_0610_08}"
			else
				strText = "#{JPZB_0610_10}"
			end
			
			AddText(sceneId,strText);
		EndEvent(sceneId)
		DispatchMissionTips(sceneId,selfId)
		return
		
	end
	
	-- ¼ì²é±³°ü¿Õ¼ä
	BeginAddItem(sceneId)
		AddItem(sceneId, selectRadioId, 1)
	local bBagOk = EndAddItem(sceneId, selfId)
	
	if bBagOk < 1 then
		BeginEvent(sceneId)
			strText = "#{JPZB_0610_11}"
			AddText(sceneId,strText);
		EndEvent(sceneId)
		DispatchMissionTips(sceneId,selfId)
		return
	end
	
	
	local nItemBagIndexStone = 0  
 
   --Ôö¼Ó¶þ¼¶°ó¶¨ÍòÁéÊ¯ÅÐ¶Ï
	if  nLevel == 2 then
     nItemBagIndexStone = GetBagPosByItemSn(sceneId, selfId, x001067_g_Stone2ID)
     if nItemBagIndexStone == -1 then --Ã»ÓÐ¶þ¼¶°ó¶¨ÍòÁéÊ¯
     	 nItemBagIndexStone = GetBagPosByItemSn(sceneId, selfId, x001067_g_StoneList[nLevel].id)
     end
  else 
  	 nItemBagIndexStone = GetBagPosByItemSn(sceneId, selfId, x001067_g_StoneList[nLevel].id)
  end
  
  local szTransferStone = ""
  if nItemBagIndexStone ~= -1 then
	   szTransferStone = GetBagItemTransfer(sceneId,selfId, nItemBagIndexStone)
  end
	
	local bDelOk = 0
	-- É¾³ýÏà¹ØµÄÊ¯Í·
	if nLevel == 2 and Stone2Count > 0 then --ÓÅÏÈ¿Û³ý°ó¶¨µÄÍòÁéÊ¯
		if Stone2Count >= x001067_g_StoneList[nLevel].num then
			bDelOk = LuaFnDelAvailableItem(sceneId,selfId, x001067_g_Stone2ID, x001067_g_StoneList[nLevel].num)
		else 
		  bDelOk = LuaFnDelAvailableItem(sceneId,selfId, x001067_g_Stone2ID,Stone2Count) and 
		           LuaFnDelAvailableItem(sceneId,selfId, x001067_g_StoneList[nLevel].id, x001067_g_StoneList[nLevel].num - Stone2Count)
	  end
	else 
		bDelOk = LuaFnDelAvailableItem(sceneId,selfId, x001067_g_StoneList[nLevel].id, x001067_g_StoneList[nLevel].num)
  end
	
	if bDelOk < 1  then
		BeginEvent(sceneId)
			strText = "#{JPZB_0610_12}"
			AddText(sceneId,strText);
		EndEvent(sceneId)
		DispatchMissionTips(sceneId,selfId)
		return
	else
		--¸øÍê¼Ò¶«Î÷£¬Íê³É
		-- AddItemListToHuman(sceneId,selfId)
		--
		local nBagIndex = TryRecieveItem( sceneId, selfId, x001067_g_EquipList[nItemIndex].id, 1 );
		
		-- ñÒÉÙÎ¢£¬2008.5.29¡£¼«Æ·×°±¸·Å³ö¡£ÕâÁ½¸ö¼«Æ·×°±¸ÎÞ·¨´ò¿×£¬Ç¿ÖÆ¿ÌÃú
		-- LuaFnEquipLock( sceneId, selfId, nBagIndex )
		
		BeginEvent(sceneId)
			strText = "#{JPZB_0610_13}"
			AddText(sceneId,strText);
		EndEvent(sceneId)
		DispatchMissionTips(sceneId,selfId)
		
		local message;	
		local randMessage = random(3);
		local sItemName = GetItemName(sceneId, x001067_g_EquipList[nItemIndex].id)
		
		local szTransferEquip = GetBagItemTransfer(sceneId,selfId, nBagIndex)
		
		if randMessage == 1 then
		   	message = format("#W#{_INFOUSR%s}#W#{WLS_08}#Y%d#W#{WLS_09}#{_INFOMSG%s}#{WLS_10}#{_INFOMSG%s}#{WLS_11}", LuaFnGetName(sceneId, selfId), x001067_g_StoneList[nLevel].num, szTransferStone, szTransferEquip);
		elseif randMessage == 2 then
			message = format("#W#{_INFOUSR%s}#W#{WLS_03}#Y%d#W#{WLS_04}#{_INFOMSG%s}#{WLS_05}#{_INFOMSG%s}#{WLS_06}#{_INFOMSG%s}#{WLS_07}", LuaFnGetName(sceneId, selfId), x001067_g_StoneList[nLevel].num, szTransferStone, szTransferStone, szTransferEquip);
		else
			message = format("#W#{WLS_00}#Y%d#I quä#W#{_INFOMSG%s}#I khen r¢ng: \#W#{_INFOUSR%s}#{WLS_01}#{_INFOMSG%s}#{WLS_02}", x001067_g_StoneList[nLevel].num, szTransferStone, LuaFnGetName(sceneId, selfId), szTransferEquip);
		end
		
		-- ñÒÉÙÎ¢£¬2008.5.29¡£¼«Æ·×°±¸·Å³ö¡£
		if nLevel == 9 then
			message = format("#I#{_INFOUSR%s}#{JPZB_0610_14}#Y#{_INFOMSG%s}#{JPZB_0610_15}", GetName(sceneId, selfId), szTransferEquip);
		end
		if nLevel == 10 then
			message = format("#I#{_INFOUSR%s}#{JPZB_0610_14}#Y#{_INFOMSG%s}#{JPZB_0610_15}", GetName(sceneId, selfId), szTransferEquip);
		end
		
		BroadMsgByChatPipe(sceneId, selfId, message, 4);
		
		--Ð±i l¤y bµ trang b¸ ngñ tÑ c¤p ³É¹¦£¬²¥·ÅÌØÐ§
		LuaFnSendSpecificImpactToUnit(sceneId,selfId,selfId,selfId,18,0)
		
		return
	end

	for i, findId in g_eventListTest do
		if missionScriptId == findId then
			CallScriptFunction( missionScriptId, "OnSubmit", sceneId, selfId, targetId, selectRadioId )
			return
		end
	end
end

--**********************************
--ËÀÍöÊÂ¼þ
--**********************************
function x001067_OnDie( sceneId, selfId, killerId )
end
